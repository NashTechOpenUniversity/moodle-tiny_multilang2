define("tiny_multilang2/commands",["exports","./options","./common","core/str","./ui"],(function(_exports,_options,_common,_str,_ui){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.getSetup=void 0;_exports.getSetup=async()=>{const[buttonText,tooltip]=await(0,_str.get_strings)(["multilang2:language","multilang2:desc"].map((key=>({key:key,component:_common.component}))));return editor=>{let languageList;if(languageList=(0,_options.isAddLanguage)(editor)?(0,_options.getLanguageOptions)(editor):(0,_options.getLanguageList)(editor),!(languageList.length<2)){if(editor.ui.registry.addSplitButton(_common.component,{icon:"language",tooltip:tooltip,fetch:function(callback){callback(languageList.map((lang=>({type:"choiceitem",value:lang.iso,text:lang.label}))))},onAction:()=>{(0,_ui.applyLanguage)(editor,null)},onItemAction:(_splitButtonApi,value)=>{(0,_ui.applyLanguage)(editor,value)}}),editor.ui.registry.addNestedMenuItem(_common.component,{icon:"language",text:buttonText,getSubmenuItems:()=>languageList.map((lang=>({type:"menuitem",text:lang.label,onAction:()=>{(0,_ui.applyLanguage)(editor,lang.iso)}})))}),!(0,_options.showAllLanguages)(editor)||(0,_options.isAddLanguage)(editor)){for(const lang of languageList)"remove"!==lang.iso&&editor.ui.registry.addButton(_common.component+"_"+lang.iso,{text:lang.iso,tooltip:lang.label,onAction:()=>{(0,_ui.applyLanguage)(editor,lang.iso,event)}});editor.ui.registry.addContextToolbar(_common.component,{predicate:function(node){return node.classList.contains("multilang-begin")||node.classList.contains("multilang-end")},items:languageList.map((lang=>_common.component+"_"+lang.iso)).join(" "),position:"node",scope:"node"})}editor.on("init",(()=>{(0,_ui.onInit)(editor)})),editor.on("BeforeGetContent",(format=>{(0,_ui.onBeforeGetContent)(editor,format)})),editor.on("PreProcess",(format=>{(0,_ui.onProcess)(editor,format,"PreProcess")})),editor.on("PostProcess",(format=>{(0,_ui.onProcess)(editor,format,"PostProcess")})),editor.on("keydown",(event=>{(0,_ui.onDelete)(editor,event)})),editor.on("blur",(()=>{(0,_ui.onBlur)()}))}}}}));

//# sourceMappingURL=commands.min.js.map